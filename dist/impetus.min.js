!function(e,n){if("function"==typeof define&&define.amd)define(["exports","module"],n);else if("undefined"!=typeof exports&&"undefined"!=typeof module)n(exports,module);else{var t={exports:{}};n(t.exports,t),e.Impetus=t.exports}}(this,function(e,n){"use strict";function t(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function o(){var e=!1;try{var n=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("test",null,n)}catch(e){}return o=function(){return e},e}var i=.04,u=.11;window.addEventListener("touchmove",function(){});var r=function e(n){function r(){document.removeEventListener("touchmove",v,!!o()&&{passive:!1}),document.removeEventListener("touchend",m),document.removeEventListener("touchcancel",l),document.removeEventListener("mousemove",v,!!o()&&{passive:!1}),document.removeEventListener("mouseup",m)}function c(){r(),document.addEventListener("touchmove",v,!!o()&&{passive:!1}),document.addEventListener("touchend",m),document.addEventListener("touchcancel",l),document.addEventListener("mousemove",v,!!o()&&{passive:!1}),document.addEventListener("mouseup",m)}function d(){g.call(M,K,N)}function a(e){if("touchmove"===e.type||"touchstart"===e.type||"touchend"===e.type){var n=e.targetTouches[0]||e.changedTouches[0];return{x:n.clientX,y:n.clientY,id:n.identifier}}return{x:e.clientX,y:e.clientY,id:null}}function f(e){if(S(e)){var n=a(e);Z||$||(Z=!0,_=!1,G=n.id,j=z=n.x,k=C=n.y,ee=[],h(j,k),c())}}function v(e){e.preventDefault();var n=a(e);Z&&n.id===G&&(z=n.x,C=n.y,h(j,k),w())}function m(e){var n=a(e);Z&&n.id===G&&l()}function l(){Z=!1,h(j,k),E(),r()}function h(e,n){for(var t=Date.now();ee.length>0&&!(t-ee[0].time<=100);)ee.shift();ee.push({x:e,y:n,time:t})}function p(){var e=z-j,n=C-k;if(K+=e*B,N+=n*B,I){var t=x();0!==t.x&&(K-=e*y(t.x)*B),0!==t.y&&(N-=n*y(t.y)*B)}else x(!0);d(),j=z,k=C,W=!1}function y(e){return 5e-6*Math.pow(e,2)+1e-4*e+.55}function w(){W||s(p),W=!0}function x(e){var n=0,t=0;return void 0!==O&&K<O?n=O-K:void 0!==R&&K>R&&(n=R-K),void 0!==U&&N<U?t=U-N:void 0!==V&&N>V&&(t=V-N),e&&(0!==n&&(K=n>0?O:R),0!==t&&(N=t>0?U:V)),{x:n,y:t,inBounds:0===n&&0===t}}function E(){var e=ee[0],n=ee[ee.length-1],t=n.x-e.x,o=n.y-e.y,i=n.time-e.time,u=i/15/B;H=t/u||0,J=o/u||0;var r=x();(Math.abs(H)>1||Math.abs(J)>1||!r.inBounds)&&(_=!0,s(L))}function L(){if(_){H*=X,J*=X,K+=H,N+=J;var e=x();if(Math.abs(H)>Q||Math.abs(J)>Q||!e.inBounds){if(I){if(0!==e.x)if(e.x*H<=0)H+=e.x*i;else{var n=e.x>0?2.5:-2.5;H=(e.x+n)*u}if(0!==e.y)if(e.y*J<=0)J+=e.y*i;else{var n=e.y>0?2.5:-2.5;J=(e.y+n)*u}}else 0!==e.x&&(K=e.x>0?O:R,H=0),0!==e.y&&(N=e.y>0?U:V,J=0);d(),s(L)}else _=!1}}var b=n.source,M=void 0===b?document:b,g=n.update,T=n.multiplier,B=void 0===T?1:T,q=n.friction,X=void 0===q?.92:q,Y=n.initialValues,A=n.boundX,D=n.boundY,F=n.bounce,I=void 0===F||F,P=n.allowOnDown,S=void 0===P?function(e){return!0}:P;t(this,e);var O,R,U,V,j,k,z,C,G,H,J,K=0,N=0,Q=.3*B,W=!1,Z=!1,$=!1,_=!1,ee=[];!function(){if(!(M="string"==typeof M?document.querySelector(M):M))throw new Error("IMPETUS: source not found.");if(!g)throw new Error("IMPETUS: update function not defined.");Y&&(Y[0]&&(K=Y[0]),Y[1]&&(N=Y[1]),d()),A&&(O=A[0],R=A[1]),D&&(U=D[0],V=D[1]),M.addEventListener("touchstart",f),M.addEventListener("mousedown",f)}(),this.destroy=function(){return M.removeEventListener("touchstart",f),M.removeEventListener("mousedown",f),r(),null},this.pause=function(){r(),Z=!1,$=!0},this.resume=function(){$=!1},this.setValues=function(e,n){"number"==typeof e&&(K=e),"number"==typeof n&&(N=n)},this.setMultiplier=function(e){B=e,Q=.3*B},this.setBoundX=function(e){O=e[0],R=e[1]},this.setBoundY=function(e){U=e[0],V=e[1]}};n.exports=r;var s=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}}()});